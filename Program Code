import random


def ask_food_preference(first_option, second_option):
    print(f"Do you prefer: {first_option} or {second_option}?")
    choice = int(input("Enter 1 for the first option or 2 for the second: "))
    return choice


def gather_food_preferences(food_storage):
    choice_data = []
    first_food = random.choice(food_storage)
    
    for _ in range(min(14, len(food_storage) - 1)):
        second_food = random.choice([
            food for food in food_storage if food != first_food
        ])
        choice = ask_food_preference(first_food, second_food)
        
        if choice == 2:
            first_food, second_food = second_food, first_food
        
        choice_data.append((first_food, second_food))
        food_storage.remove(second_food)
    
    food_storage.remove(first_food)
    return choice_data # A list of (preferred-item, other-item) tuples


def organize_food_preferences(choice_data):
    food_dict = {}
    for choice_tuple in choice_data:
        food1, food2 = choice_tuple
        
        if food1 not in food_dict:
            # Use a different method with less impact/bias on new items
            food_dict[food1] = food_dict.get(food2, 0) + 1
        else:
            food_dict[food1] += 1
        
        if food2 not in food_dict:
            food_storage.append(food2)
    
    return list(food_dict.items())


def fetch_dict():
    # Grabs Dict From Global Storage, return that dict's value
    # Otherwise creates empty dict in storage and return that dict's value
    return "joe mamma"


def update_profile_dict(organized_foods, profile_dict):
    for food, count in organized_foods:
        if food in profile_dict:
            profile_dict[food] += count
        else:
            profile_dict[food] = count
    
    return dict(sorted(profile_dict.items(), key=lambda item: item[1], reverse=True))


if __name__ == '__main__':
    food_storage = [
        "pizza",
        "chicken",
        "rice",
        "noodles",
        "tandoori chicken",
        "spaghetti",
        "sushi",
        "steak",
        "hamburger",
        "tacos",
        "barbecue ribs",
        "dumplings",
        "soup",
        "waffles",
        "pulled pork",
        "grilled salmon",
        "calamari",
    ]
    choice_data = gather_food_preferences(food_storage)
    organized_foods = organize_food_preferences(choice_data)
    profile_dict = {'steak': 14, 'barbecue ribs': 11, 'pulled pork': 10, 'chicken': 7, 'grilled salmon': 3, 'rice': 1}
    profile_dict = update_profile_dict(organized_foods, profile_dict)
    # Add function here that stores updated profile_dict in storage
    print(profile_dict)
